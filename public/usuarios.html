<script>
    const BASE_URL = "https://inventario-horom-production.up.railway.app";

    async function cargar(){
      const users = await fetch(`${BASE_URL}/usuarios-registrados`).then(r => r.json());
      tabla.innerHTML = users.map(u => `
        <tr><td>${u.usuario}</td>
        <td><input type="password" id="p${u._id}" placeholder="Contrase単a nueva"></td>
        <td><button onclick="modificar('${u._id}')">Modificar</button></td>
        <td><button onclick="eliminar('${u._id}')">Eliminar</button></td></tr>`).join("");
    }

    async function agregar(){
      await fetch(`${BASE_URL}/nuevo-usuario`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ usuario: nuevoUsuario.value, contrase単a: nuevaPass.value })
      });
      cargar();
    }

    async function modificar(id){
      await fetch(`${BASE_URL}/modificar-usuario/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ contrase単a: document.getElementById(`p${id}`).value })
      });
      cargar();
    }

    async function eliminar(id){
      if(confirm("多Eliminar usuario?")){
        await fetch(`${BASE_URL}/eliminar-usuario/${id}`, { method: "DELETE" });
        cargar();
      }
    }

    cargar();
</script>
